<% groups.each do |messages| %>
  <% messages.each_with_index do |message, i| %>
    <%= render message, top: i == 0, bottom: i + 1 == messages.length %>
  <% end %>
<% end %>

<% if from_infinite_scroll %>
  <div class="hidden" data-scroll-target="loadedMessagesAnnouncer"></div>
<% end %>
